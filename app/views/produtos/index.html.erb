<p id="notice"><%= notice %></p>

<h1>Produtos</h1>
<div class="table-responsive">
  <table class="table table-hover">
    <thead>
      <tr>
        <th></th>
        <th>Nome</th>
        <th>Descrição</th>
        <th>Preço (R$)</th>
        <th>Categoria</th>
        <th colspan="3"></th>
      </tr>
    </thead>

    <tbody>
      <% @produtos.each do |produto| %>
        <tr>
          <td class="min-td-img"><img alt="image" class="img-responsive" src="<%= produto.foto.url(:thumb)%>"/></td>
          <td><%= produto.nome %></td>
          <td><%= truncate(produto.descricao, length: 120, separator: '...') %></td>
          <td>R$ <%= produto.preco.blank? ? "0.0" : number_with_precision(produto.preco.blank? ? "0.0" : produto.preco, :precision => 2, separator: ",", :delimiter => '.')%></td>
          <td><%= produto.categoria.blank? ? "" : produto.categoria.descricao %></td>
          <td><%= link_to '<i class="fa fa-search"></i> Ver'.html_safe, produto , class: "btn btn-default" %></td>
          <td><%= link_to '<i class="fa fa-edit"></i> Editar'.html_safe, edit_produto_path(produto) , class: "btn btn-default" %></td>
          <td><%= link_to '<i class="fa fa-trash"></i> Deletar'.html_safe, produto, method: :delete, data: { confirm: 'Você tem certeza que deseja realizar essa operação?' } , class: "btn btn-default" %></td>
        </tr>
      <% end %>
    </tbody>
  </table>
</div>  

<%= link_to '<i class="fa fa-plus"></i> Novo'.html_safe, new_produto_path, class: "btn btn-default" %>
